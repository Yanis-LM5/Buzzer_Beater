<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BB News — Buzzer Beater</title>
    <link rel="stylesheet" href="style_teams.css"/>
    <link rel="shortcut icon" href="logo_bb.png" type="image/x-icon">
    <script src="https://kit.fontawesome.com/3ca4fe2b8a.js"></script>

</head>
<body style="background: #0a0a0a; min-height: 100vh;">

<!-- ===== HEADER ===== -->
<header>
    <input type="checkbox" id="check">
    <label for="check" class="checkbox">&#9776;</label>
    <nav class="navbar">
        <ul>
            <li><img src="logo_bb.png" alt="logo"></li>
            <li><a href="bb_menu.html">Home</a></li>
            <li><a href="bb_news.html" class="nav-current">News</a></li>
            <li><a href="bb_teams.html">Teams</a></li>
            <li>Results</li>
            <li><a href="http://localhost:5173">Map</a></li>
            <li><a href="bb_forum.html">Forum</a></li>
            <li><a href="login.html">Connect</a></li>
        </ul>
    </header>

<!-- ===== BANNER ===== -->
<div class="teams-page-banner">
    <div class="teams-page-banner__inner">
        <span class="teams-badge"><i class="fa-solid fa-newspaper"></i> Flux RSS en direct</span>
        <h1>BB <span>News</span></h1>
        <p>Actualités NBA · Résultats · Transferts · Analyses</p>
    </div>
</div>

<!-- ===== NEWS GRILLE ===== -->
<section class="section-home" style="padding-top: 50px;">
    <div class="news-grid news-grid--full" id="news-container">
    </div>
</section>

<!-- ===== FOOTER ===== -->
<footer class="site-footer">
    <div class="footer-inner">
        <div class="footer-brand">
            <img src="logo_bb.png" alt="logo" class="footer-logo">
            <p class="footer-name">Buzzer<span>Beater</span></p>
            <p class="footer-tagline">Le hub NBA francophone</p>
        </div>

        <div class="footer-links">
            <h4>Navigation</h4>
            <ul>
                <li><a href="bb_menu.html">Home</a></li>
                <li><a href="bb_news.html">News</a></li>
                <li><a href="bb_teams.html">Teams</a></li>
                <li><a href="bb_menu.html#forum">Forum</a></li>
            </ul>
        </div>

        <div class="footer-links">
            <h4>Compte</h4>
            <ul>
                <li><a href="login.html">Connexion</a></li>
                <li><a href="register.html">Inscription</a></li>
            </ul>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2025 BuzzerBeater — Fait avec <i class="fa-solid fa-basketball" style="color: rgba(244,94,7,1)"></i> par Yanzer92i78 et Christopher</p>
    </div>
</footer>

<script>
const RSS_URL = "https://corsproxy.io/?https://rmcsport.bfmtv.com/rss/basket/nba/";

async function loadNews() {
    const container = document.getElementById("news-container");
        const res = await fetch(RSS_URL);
        const text = await res.text();
        const xml = new DOMParser().parseFromString(text, "text/xml");
        const items = Array.from(xml.getElementsByTagName("item"));

        container.innerHTML = "";

        if (items.length === 0) {
            container.innerHTML = `<p class="news-error"><i class="fa-solid fa-circle-exclamation"></i> Aucun article disponible pour le moment.</p>`;
            return;
        }

        items.forEach(item => {
            const title   = item.querySelector("title")?.textContent || "";
            const rawDesc = item.querySelector("description")?.textContent || "";
            const desc    = rawDesc.replace(/<[^>]+>/g, "").trim().slice(0, 140) + "…";
            const pubDate = item.querySelector("pubDate")?.textContent || "";
            const date    = pubDate
                ? new Date(pubDate).toLocaleDateString("fr-FR", { day: "numeric", month: "short", year: "numeric" })
                : "";
            const enclosure = item.querySelector("enclosure");
            const img     = enclosure ? enclosure.getAttribute("url") : "";
            const link    = item.querySelector("link")?.textContent || "#";

            const card = document.createElement("a");
            card.className = "news-card";
            card.href = link;
            card.target = "_blank";
            card.rel = "noopener";

            card.innerHTML = `
                ${img
                    ? `<div class="news-card__img" style="background-image:url('${img}')"></div>`
                    : `<div class="news-card__img news-card__img--empty"><i class="fa-solid fa-basketball"></i></div>`
                }
                <div class="news-card__body">
                    <span class="news-card__date"><i class="fa-regular fa-clock"></i> ${date}</span>
                    <h3>${title}</h3>
                    <p>${desc}</p>
                    <span class="news-card__read">Lire l'article <i class="fa-solid fa-arrow-right"></i></span>
                </div>`;

            container.appendChild(card);
        });

}

loadNews();
</script>
<script src="navbar-auth.js"></script>

</body>
</html>
